# Window Restore - 開発工程表（タスク管理）

## プロジェクト概要
- **プロジェクト名**: Window Restore
- **開発期間**: 4週間（予定）
- **チーム**: 1名
- **技術スタック**: Rust + Swift + AppKit

---

## Phase 1: プロジェクト基盤構築（Week 1）

### ✅ 1.1 初期設定
- [x] Cargo.tomlの修正（edition修正、依存関係追加）
- [x] 修正版要件定義仕様書の作成
- [x] 開発工程表の作成
- [x] プロジェクト構造の整備
- [x] Gitリポジトリの初期化
- [x] README.mdの作成

### ✅ 1.2 ビルド環境構築
- [x] build.rsの作成
- [x] cbindgen.tomlの設定
- [x] Xcodeプロジェクトの作成
- [x] FFIブリッジの基本設定
- [x] ビルドスクリプトの作成
- [x] Universal Binary対応の設定

### ✅ 1.3 開発環境テスト
- [x] Rustライブラリのビルドテスト
- [x] Cヘッダー生成のテスト
- [不要] Xcodeプロジェクトのビルドテスト（CLT運用）
- [不要] SwiftPMビルドテスト（CLT環境）
- [不要] 基本的なFFI呼び出しテスト（SwiftPM経由）

---

## Phase 2: コア機能実装（Week 2）

### 🔧 2.1 ウィンドウ関連機能
- [x] window_scanner.rsの実装
- [x] アクセシビリティAPIの統合
- [x] ビルドテストの実施とエラー修正
- [x] ウィンドウ情報取得機能
- [x] ディスプレイ情報取得機能
- [x] 単体テストの作成

### 🔧 2.2 ウィンドウ復元機能
- [x] ウィンドウ位置・サイズ設定機能
- [x] ディスプレイ間移動機能
- [x] アプリ起動機能
- [x] エラーハンドリングの実装

### 🔧 2.3 レイアウト管理機能
- [x] layout_manager.rsの実装
- [x] JSON形式での保存・読み込み
- [x] レイアウト一覧取得機能
- [x] レイアウト削除機能
- [x] バリデーション機能

---

## Phase 3: 設定・権限管理（Week 3）

### ⚙️ 3.1 設定管理機能
- [x] config.rsの実装
- [x] 設定ファイルの読み込み・保存
- [x] デフォルト設定の定義
- [x] 設定バリデーション
- [不要] 設定変更の通知機能

### 🔐 3.2 権限管理機能
- [x] permission_checker.rsの実装
- [x] アクセシビリティ権限チェック
- [x] 権限要求機能
- [x] 権限状態の監視（Swift側）
- [x] ユーザー案内機能（Swift側）

### 📱 3.3 通知機能（簡易版）
- [x] Swift UserNotificationsで成功/失敗のみ通知
- [不要] 通知カスタマイズ
- [不要] 通知履歴管理
- [不要] 通知設定

---

## Phase 4: UI・統合（Week 4）

### 🎨 4.1 Swift UI実装
- [x] AppDelegate.swiftの実装
- [x] MenuController.swiftの実装
- [x] PermissionManager.swiftの実装
- [x] LayoutSelector.swiftの実装
- [x] メニューバーアイコンの作成
- [x] メニュー項目の実装
- [x] 設定画面の実装

### 🔗 4.2 FFI統合
- [x] ffi.rsの完全実装
- [x] get_last_error_message()関数の実装
- [x] Swift側のFFI呼び出し
- [x] エラーハンドリングの統合
- [x] メモリ管理の最適化
- [x] 型安全性の確保

### 🧪 4.3 テスト・デバッグ
- [x] 統合テストの実装
- [不要] UIテストの実装（CLT運用・配布なし）
- [不要] パフォーマンステスト（CLT運用・配布なし）
- [不要] メモリリークチェック（CLT運用・配布なし）
- [x] エラーケースのテスト

---

## Phase 5: 配布準備（Week 5）

### 📦 5.1 パッケージング（不要: 配布なし）
- [不要] .appパッケージの作成
- [不要] アイコンファイルの作成
- [不要] Info.plistの設定
- [不要] リソースファイルの配置
- [不要] インストーラーの作成

### 🔒 5.2 セキュリティ・署名（不要: 配布なし）
- [不要] コード署名の設定
- [不要] プライバシー説明の作成
- [不要] 権限要求の説明
- [不要] セキュリティ監査
- [不要] 配布準備

### 📚 5.3 ドキュメント・リリース（不要: 配布なし）
- [不要] ユーザーマニュアルの作成
- [不要] インストール手順の作成
- [不要] トラブルシューティングガイド
- [不要] リリースノートの作成
- [不要] GitHubリリースの作成

---

## タスク管理

### 優先度
- 🔴 **高**: コア機能（ウィンドウスキャン・復元）
- 🟡 **中**: UI・設定管理
- 🟢 **低**: ドキュメント・配布

### 完了条件
- WindowLevel enumが正しく実装され、すべてのモジュールで使用可能
- `cargo build`と`cargo test`がエラーなく完了
- TASK_SCHEDULEが最新の進捗を反映

### リスク管理
- **技術リスク**: アクセシビリティAPIの制限
- **スケジュールリスク**: FFI統合の複雑さ
- **品質リスク**: メモリ管理の複雑さ

---

## 進捗追跡

### 週次レビュー
- [ ] Week 1: プロジェクト基盤構築完了
- [ ] Week 2: コア機能実装完了
- [ ] Week 3: 設定・権限管理完了
- [ ] Week 4: UI・統合完了
- [ ] Week 5: 配布準備完了

### 品質ゲート
- [ ] コードレビュー完了
- [ ] テストカバレッジ80%以上
- [ ] パフォーマンステスト合格
- [ ] セキュリティ監査合格

---

**作成日**: 2024年1月15日  
**最終更新**: 2025年10月23日（Swift FFIエラー統合・Rust初期化安全化）  
**担当者**: 開発者
