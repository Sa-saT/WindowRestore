# Window Restore - 開発工程表（タスク管理）

## プロジェクト概要
- **プロジェクト名**: Window Restore
- **開発期間**: 4週間（予定）
- **チーム**: 1名
- **技術スタック**: Rust + Swift + AppKit

---

## Phase 1: プロジェクト基盤構築（Week 1）

### ✅ 1.1 プロジェクト初期設定
- [x] Cargo.tomlの修正（edition修正、依存関係追加）
- [x] 修正版要件定義仕様書の作成
- [x] 開発工程表（タスクファイル）の作成
- [ ] プロジェクト構造の整備
- [ ] Gitリポジトリの初期化
- [ ] README.mdの作成

### 🔄 1.2 ビルド環境構築
- [ ] build.rsの作成
- [ ] cbindgen.tomlの設定
- [ ] Xcodeプロジェクトの作成
- [ ] FFIブリッジの基本設定
- [ ] ビルドスクリプトの作成
- [ ] Universal Binary対応の設定

### 📋 1.3 開発環境テスト
- [ ] Rustライブラリのビルドテスト
- [ ] Cヘッダー生成のテスト
- [ ] Xcodeプロジェクトのビルドテスト
- [ ] 基本的なFFI呼び出しテスト

---

## Phase 2: コア機能実装（Week 2）

### 🔧 2.1 ウィンドウスキャン機能
- [ ] window_scanner.rsの実装
- [ ] アクセシビリティAPIの統合
- [ ] ウィンドウ情報取得機能
- [ ] ディスプレイ情報取得機能
- [ ] 単体テストの作成

### 🔧 2.2 ウィンドウ復元機能
- [ ] window_restorer.rsの実装
- [ ] ウィンドウ位置・サイズ設定機能
- [ ] ディスプレイ間移動機能
- [ ] アプリ起動機能
- [ ] エラーハンドリングの実装

### 🔧 2.3 レイアウト管理機能
- [ ] layout_manager.rsの実装
- [ ] JSON形式での保存・読み込み
- [ ] レイアウト一覧取得機能
- [ ] レイアウト削除機能
- [ ] バリデーション機能

---

## Phase 3: 設定・権限管理（Week 3）

### ⚙️ 3.1 設定管理機能
- [ ] config.rsの実装
- [ ] 設定ファイルの読み込み・保存
- [ ] デフォルト設定の定義
- [ ] 設定バリデーション
- [ ] 設定変更の通知機能

### 🔐 3.2 権限管理機能
- [ ] permission_checker.rsの実装
- [ ] アクセシビリティ権限チェック
- [ ] 権限要求機能
- [ ] 権限状態の監視
- [ ] ユーザー案内機能

### 📱 3.3 通知機能
- [ ] notification.rsの実装
- [ ] macOSネイティブ通知
- [ ] 通知のカスタマイズ
- [ ] 通知履歴管理
- [ ] 通知設定機能

---

## Phase 4: UI・統合（Week 4）

### 🎨 4.1 Swift UI実装
- [ ] AppDelegate.swiftの実装
- [ ] MenuController.swiftの実装
- [ ] PermissionManager.swiftの実装
- [ ] LayoutSelector.swiftの実装
- [ ] メニューバーアイコンの作成
- [ ] メニュー項目の実装
- [ ] 設定画面の実装

### 🔗 4.2 FFI統合
- [ ] ffi.rsの完全実装
- [ ] get_last_error_message()関数の実装
- [ ] Swift側のFFI呼び出し
- [ ] エラーハンドリングの統合
- [ ] メモリ管理の最適化
- [ ] 型安全性の確保

### 🧪 4.3 テスト・デバッグ
- [ ] 統合テストの実装
- [ ] UIテストの実装
- [ ] パフォーマンステスト
- [ ] メモリリークチェック
- [ ] エラーケースのテスト

---

## Phase 5: 配布準備（Week 5）

### 📦 5.1 パッケージング
- [ ] .appパッケージの作成
- [ ] アイコンファイルの作成
- [ ] Info.plistの設定
- [ ] リソースファイルの配置
- [ ] インストーラーの作成

### 🔒 5.2 セキュリティ・署名
- [ ] コード署名の設定
- [ ] プライバシー説明の作成
- [ ] 権限要求の説明
- [ ] セキュリティ監査
- [ ] 配布準備

### 📚 5.3 ドキュメント・リリース
- [ ] ユーザーマニュアルの作成
- [ ] インストール手順の作成
- [ ] トラブルシューティングガイド
- [ ] リリースノートの作成
- [ ] GitHubリリースの作成

---

## タスク管理

### 優先度
- 🔴 **高**: コア機能（ウィンドウスキャン・復元）
- 🟡 **中**: UI・設定管理
- 🟢 **低**: ドキュメント・配布

### 完了条件
- [ ] 全ての単体テストがパス
- [ ] 統合テストがパス
- [ ] メモリリークなし
- [ ] パフォーマンス要件を満たす
- [ ] セキュリティ要件を満たす

### リスク管理
- **技術リスク**: アクセシビリティAPIの制限
- **スケジュールリスク**: FFI統合の複雑さ
- **品質リスク**: メモリ管理の複雑さ

---

## 進捗追跡

### 週次レビュー
- [ ] Week 1: プロジェクト基盤構築完了
- [ ] Week 2: コア機能実装完了
- [ ] Week 3: 設定・権限管理完了
- [ ] Week 4: UI・統合完了
- [ ] Week 5: 配布準備完了

### 品質ゲート
- [ ] コードレビュー完了
- [ ] テストカバレッジ80%以上
- [ ] パフォーマンステスト合格
- [ ] セキュリティ監査合格

---

**作成日**: 2024年1月15日  
**最終更新**: 2024年1月15日（改善案反映）  
**担当者**: 開発者
